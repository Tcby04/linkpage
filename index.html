<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkPage - Your Link in Bio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0a;
            --card: #141414;
            --border: #262626;
            --text: #fafafa;
            --text-muted: #a3a3a3;
            --accent: #22c55e;
            --accent-hover: #16a34a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .preview-mode .editor { display: none; }
        .preview-mode .preview { display: block; }

        .editor {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .editor h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group { margin-bottom: 16px; }

        .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-group textarea { resize: vertical; min-height: 80px; }

        .links-list { margin-bottom: 16px; }

        .link-item {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
            align-items: center;
        }

        .link-item input {
            flex: 1;
            padding: 8px 10px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 13px;
        }

        .link-item .drag {
            cursor: grab;
            color: var(--text-muted);
            font-size: 18px;
        }

        .link-item .delete {
            cursor: pointer;
            color: #ef4444;
            font-size: 18px;
            padding: 4px;
        }

        .btn {
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .btn-primary { background: var(--accent); color: #000; }
        .btn-primary:hover { background: var(--accent-hover); }
        .btn-secondary { background: var(--card); border: 1px solid var(--border); color: var(--text); }
        .btn-secondary:hover { border-color: var(--text-muted); }
        .btn-small { padding: 6px 12px; font-size: 12px; }
        .btn-danger { background: #dc2626; color: #fff; }
        .btn-danger:hover { background: #b91c1c; }

        .preview { display: none; text-align: center; padding: 40px 20px; }

        .preview .avatar {
            width: 96px;
            height: 96px;
            border-radius: 50%;
            background: var(--card);
            border: 3px solid var(--accent);
            margin: 0 auto 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            overflow: hidden;
        }

        .preview .avatar img { width: 100%; height: 100%; object-fit: cover; }

        .preview .name { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
        .preview .bio { color: var(--text-muted); font-size: 14px; margin-bottom: 24px; }

        .preview .links { display: flex; flex-direction: column; gap: 12px; }

        .preview .link {
            display: block;
            padding: 14px 20px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
        }

        .preview .link:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .actions { display: flex; gap: 12px; margin-top: 20px; flex-wrap: wrap; }

        .color-options { display: flex; gap: 8px; flex-wrap: wrap; }

        .color-option {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .color-option:hover { transform: scale(1.1); }
        .color-option.active { border-color: #fff; }

        .tabs {
            display: flex;
            gap: 4px;
            background: var(--bg);
            padding: 4px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-muted);
            transition: all 0.2s;
        }

        .tab.active { background: var(--card); color: var(--text); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .toast {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--accent);
            color: #000;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }

        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        .pro-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #000;
            font-size: 10px;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 4px;
            margin-left: 8px;
        }

        .pro-lock {
            opacity: 0.5;
            position: relative;
        }

        .pro-lock::after {
            content: 'üîí';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }

        /* Pro Features */
        .pro-only { display: none; }
        .pro-only.show { display: block; }

        .analytics-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .analytics-card h3 {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .analytics-card .value {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent);
        }

        .analytics-row {
            display: flex;
            gap: 12px;
        }

        .analytics-row .analytics-card { flex: 1; }

        /* Background image preview */
        .bg-preview {
            width: 100%;
            height: 80px;
            border-radius: 8px;
            background-size: cover;
            background-position: center;
            margin-top: 8px;
            border: 1px solid var(--border);
        }

        /* Branded footer */
        .branding {
            text-align: center;
            margin-top: 24px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .branding a { color: var(--text-muted); text-decoration: none; }

        /* Share view */
        .share-view { display: none; }
        .share-view.active { display: block; }

        /* Custom domain input */
        .domain-preview {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 8px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Editor View -->
        <div class="editor-view" id="editor-view">
            <div class="tabs">
                <div class="tab active" data-tab="profile">Profile</div>
                <div class="tab" data-tab="links">Links</div>
                <div class="tab" data-tab="appearance">Appearance</div>
                <div class="tab" data-tab="pro">Pro</div>
            </div>

            <!-- Profile Tab -->
            <div class="tab-content active" id="profile-tab">
                <div class="editor">
                    <h2>üë§ Profile</h2>
                    <div class="form-group">
                        <label>Display Name</label>
                        <input type="text" id="name" placeholder="Your name" value="Trent">
                    </div>
                    <div class="form-group">
                        <label>Bio</label>
                        <textarea id="bio" placeholder="Tell people about yourself">Pizza truck owner. Building things. üìç NWA</textarea>
                    </div>
                    <div class="form-group">
                        <label>Avatar URL</label>
                        <input type="text" id="avatar" placeholder="https://...">
                    </div>
                </div>
                <div class="actions">
                    <button class="btn btn-primary" onclick="savePage()">üíæ Save</button>
                    <button class="btn btn-secondary" onclick="showShareView()">üëÅ View Page</button>
                </div>
            </div>

            <!-- Links Tab -->
            <div class="tab-content" id="links-tab">
                <div class="editor">
                    <h2>üîó Links <span id="links-badge"></span></h2>
                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 12px;">
                        <span id="links-count">0</span>/5 links (free). <a href="#" onclick="switchTab('pro'); showToast('Pro unlocks unlimited links!')" style="color: var(--accent)">Upgrade to Pro</a> for unlimited.
                    </p>
                    <div class="links-list" id="links-list"></div>
                    <button class="btn btn-secondary btn-small" onclick="addLink()">+ Add Link</button>
                </div>
                <div class="actions">
                    <button class="btn btn-primary" onclick="savePage()">üíæ Save</button>
                </div>
            </div>

            <!-- Appearance Tab -->
            <div class="tab-content" id="appearance-tab">
                <div class="editor">
                    <h2>üé® Theme</h2>
                    <div class="form-group">
                        <label>Background Color</label>
                        <div class="color-options">
                            <div class="color-option active" style="background: #0a0a0a" data-theme="#0a0a0a" onclick="setTheme(this)"></div>
                            <div class="color-option" style="background: #1e1b4b" data-theme="#1e1b4b" onclick="setTheme(this)"></div>
                            <div class="color-option" style="background: #14532d" data-theme="#14532d" onclick="setTheme(this)"></div>
                            <div class="color-option" style="background: #7f1d1d" data-theme="#7f1d1d" onclick="setTheme(this)"></div>
                            <div class="color-option" style="background: #292524" data-theme="#292524" onclick="setTheme(this)"></div>
                            <div class="color-option" style="background: #fafafa" data-theme="#fafafa" onclick="setTheme(this)"></div>
                        </div>
                    </div>
                </div>

                <div class="editor pro-only" id="bg-image-section">
                    <h2>üñº Background Image <span class="pro-badge">PRO</span></h2>
                    <div class="form-group">
                        <label>Image URL (Pro)</label>
                        <input type="text" id="bg-image" placeholder="https://..." onchange="updateBgPreview()">
                        <div class="bg-preview" id="bg-preview"></div>
                    </div>
                </div>

                <div class="actions">
                    <button class="btn btn-primary" onclick="savePage()">üíæ Save</button>
                </div>
            </div>

            <!-- Pro Tab -->
            <div class="tab-content" id="pro-tab">
                <div class="editor">
                    <h2>‚ö° Pro Features</h2>
                    <p style="font-size: 14px; color: var(--text-muted); margin-bottom: 20px;">
                        Upgrade to Pro for $3/month to unlock:
                    </p>
                    <ul style="font-size: 14px; color: var(--text-muted); margin-bottom: 20px; padding-left: 20px;">
                        <li>‚úì Unlimited links</li>
                        <li>‚úì Custom background image</li>
                        <li>‚úì Analytics (clicks & views)</li>
                        <li>‚úì Custom domain support</li>
                        <li>‚úì Remove LinkPage branding</li>
                    </ul>
                    
                    <div id="pro-status" style="display: none;">
                        <p style="color: var(--accent); font-weight: 600;">‚úì Pro is active!</p>
                    </div>
                    
                    <div id="pro-prompt">
                        <button class="btn btn-primary" onclick="upgradeToPro()" style="width: 100%; margin-bottom: 12px;">
                            üöÄ Upgrade to Pro - $3/month
                        </button>
                        <p style="font-size: 12px; color: var(--text-muted); text-align: center;">
                            Or enter pro code: <input type="text" id="pro-code" placeholder="XXXX-XXXX" style="width: 100px; padding: 4px 8px; font-size: 12px;">
                            <button class="btn btn-secondary btn-small" onclick="redeemCode()">Redeem</button>
                        </p>
                    </div>
                </div>

                <div class="editor pro-only show" id="analytics-section" style="display: none;">
                    <h2>üìä Analytics <span class="pro-badge">PRO</span></h2>
                    <div class="analytics-row">
                        <div class="analytics-card">
                            <h3>Views</h3>
                            <div class="value" id="stat-views">0</div>
                        </div>
                        <div class="analytics-card">
                            <h3>Clicks</h3>
                            <div class="value" id="stat-clicks">0</div>
                        </div>
                    </div>
                    <p style="font-size: 12px; color: var(--text-muted); margin-top: 12px;">
                        Stats reset daily. Share your page to track engagement.
                    </p>
                </div>

                <div class="editor pro-only show" id="domain-section" style="display: none;">
                    <h2>üåê Custom Domain <span class="pro-badge">PRO</span></h2>
                    <div class="form-group">
                        <label>Your Domain</label>
                        <input type="text" id="custom-domain" placeholder="links.yourname.com">
                        <p class="domain-preview" id="domain-instructions">
                            Set CNAME to: <span id="server-domain">linkpage-server.onrender.com</span><br>
                            Then enter your domain above and save.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Share/Preview View -->
        <div class="share-view" id="share-view">
            <div class="preview" id="preview" style="display: block">
                <div class="avatar" id="preview-avatar">üîó</div>
                <div class="name" id="preview-name">Trent</div>
                <div class="bio" id="preview-bio">Pizza truck owner. Building things. üìç NWA</div>
                <div class="links" id="preview-links"></div>
            </div>
            
            <div class="branding" id="branding">
                <a href="#">Made with LinkPage</a>
            </div>
            
            <div class="actions" style="justify-content: center;">
                <button class="btn btn-secondary" onclick="showEditorView()">‚úèÔ∏è Edit</button>
            </div>
        </div>

        <!-- Pro Modal -->
        <div id="proModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 100; align-items: center; justify-content: center;">
            <div class="editor" style="max-width: 400px; margin: 1rem;">
                <h2>üöÄ Unlock Pro</h2>
                <p style="font-size: 14px; color: var(--text-muted); margin-bottom: 16px;">
                    Pay $3/month to unlock Pro features:
                </p>
                <ul style="font-size: 13px; color: var(--text-muted); margin-bottom: 16px; padding-left: 1.2rem;">
                    <li>‚úì Unlimited links</li>
                    <li>‚úì Custom background image</li>
                    <li>‚úì Analytics (clicks & views)</li>
                    <li>‚úì Custom domain support</li>
                    <li>‚úì Remove LinkPage branding</li>
                </ul>
                <a href="https://buy.stripe.com/14A3cv3aleghbjl8mc8EM02" target="_blank" class="btn btn-primary" style="width: 100%; text-decoration: none; display: block; text-align: center; margin-bottom: 12px;">
                    Pay $3/mo with Stripe
                </a>
                <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 12px; text-align: center;">
                    After payment, enter any code (like your email or name) to unlock. We'll verify with Stripe.
                </p>
                <div class="form-group">
                    <label>Enter your unlock code:</label>
                    <input type="text" id="unlockCode" placeholder="Code">
                </div>
                <button class="btn btn-primary" onclick="unlockPro()" style="width: 100%;">Unlock</button>
                <button class="btn btn-secondary" onclick="closeProModal()" style="width: 100%; margin-top: 8px;">Cancel</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">Saved!</div>

    <script>
        let links = [
            { title: 'üçï FoodTruckIQ', url: 'https://tcby04.github.io/foodtruckiq/' },
            { title: 'üì∏ Instagram', url: 'https://instagram.com' },
        ];

        let isPro = false;
        let currentTheme = '#0a0a0a';
        let analytics = { views: 0, clicks: 0 };

        function renderLinks() {
            const list = document.getElementById('links-list');
            const canAddMore = isPro || links.length < 5;
            
            document.getElementById('links-count').textContent = links.length;
            document.getElementById('links-badge').innerHTML = isPro ? '<span class="pro-badge">PRO</span>' : '';
            
            list.innerHTML = links.map((link, i) => `
                <div class="link-item">
                    <span class="drag">‚ãÆ‚ãÆ</span>
                    <input type="text" placeholder="Title" value="${link.title}" onchange="updateLink(${i}, 'title', this.value)">
                    <input type="text" placeholder="URL" value="${link.url}" onchange="updateLink(${i}, 'url', this.value)">
                    <span class="delete" onclick="deleteLink(${i})">√ó</span>
                </div>
            `).join('');
        }

        function addLink() {
            if (!isPro && links.length >= 5) {
                showToast('5 link limit! Upgrade to Pro for unlimited.');
                return;
            }
            links.push({ title: '', url: '' });
            renderLinks();
        }

        function updateLink(i, field, value) {
            links[i][field] = value;
        }

        function deleteLink(i) {
            links.splice(i, 1);
            renderLinks();
        }

        function setTheme(el) {
            document.querySelectorAll('.color-option').forEach(o => o.classList.remove('active'));
            el.classList.add('active');
            currentTheme = el.dataset.theme;
            document.documentElement.style.setProperty('--bg', currentTheme);
            
            if (currentTheme === '#fafafa') {
                document.documentElement.style.setProperty('--text', '#000');
                document.documentElement.style.setProperty('--text-muted', '#666');
            } else {
                document.documentElement.style.setProperty('--text', '#fafafa');
                document.documentElement.style.setProperty('--text-muted', '#a3a3a3');
            }
        }

        function updateBgPreview() {
            const url = document.getElementById('bg-image').value;
            const preview = document.getElementById('bg-preview');
            if (url) {
                preview.style.backgroundImage = `url(${url})`;
            } else {
                preview.style.backgroundImage = 'none';
            }
        }

        function updatePreview() {
            document.getElementById('preview-name').textContent = document.getElementById('name').value || 'Your Name';
            document.getElementById('preview-bio').textContent = document.getElementById('bio').value || 'Your bio here';
            
            const avatarUrl = document.getElementById('avatar').value;
            const avatar = document.getElementById('preview-avatar');
            if (avatarUrl) {
                avatar.innerHTML = `<img src="${avatarUrl}" alt="Avatar">`;
            } else {
                avatar.textContent = 'üîó';
            }

            const bgImage = document.getElementById('bg-image').value;
            if (bgImage && isPro) {
                document.getElementById('preview').style.backgroundImage = `url(${bgImage})`;
                document.getElementById('preview').style.backgroundSize = 'cover';
                document.getElementById('preview').style.backgroundPosition = 'center';
            }

            document.getElementById('preview-links').innerHTML = links
                .filter(l => l.title && l.url)
                .map(l => `<a href="${l.url}" class="link" target="_blank" onclick="trackClick()">${l.title}</a>`)
                .join('') || '<p style="color: var(--text-muted)">No links yet</p>';

            // Hide branding if Pro
            document.getElementById('branding').style.display = isPro ? 'none' : 'block';
        }

        function trackClick() {
            analytics.clicks++;
            localStorage.setItem('linkpage_analytics', JSON.stringify(analytics));
            updateAnalyticsDisplay();
        }

        function trackView() {
            analytics.views++;
            localStorage.setItem('linkpage_analytics', JSON.stringify(analytics));
            updateAnalyticsDisplay();
        }

        function updateAnalyticsDisplay() {
            document.getElementById('stat-views').textContent = analytics.views;
            document.getElementById('stat-clicks').textContent = analytics.clicks;
        }

        function showShareView() {
            document.getElementById('editor-view').classList.remove('editor-view');
            document.getElementById('editor-view').style.display = 'none';
            document.getElementById('share-view').classList.add('active');
            updatePreview();
            trackView();
        }

        function showEditorView() {
            document.getElementById('share-view').classList.remove('active');
            document.getElementById('editor-view').style.display = 'block';
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
            document.getElementById(`${tab}-tab`).classList.add('active');
        }

        function savePage() {
            const customDomain = document.getElementById('custom-domain').value.trim();
            
            const data = {
                name: document.getElementById('name').value,
                bio: document.getElementById('bio').value,
                avatar: document.getElementById('avatar').value,
                links: links,
                theme: currentTheme,
                bgImage: document.getElementById('bg-image').value,
                customDomain: customDomain,
                isPro: isPro
            };
            
            localStorage.setItem('linkpage_data', JSON.stringify(data));
            
            // Sync to server if custom domain is set (Pro feature)
            if (customDomain && isPro) {
                fetch('https://linkpage-server.onrender.com/api/save', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ domain: customDomain, data: data })
                })
                .then(res => res.json())
                .then(result => {
                    if (result.success) {
                        showToast('Saved! Your custom domain is live üåê');
                    } else {
                        showToast('Saved (server sync pending)');
                    }
                })
                .catch(err => {
                    console.log('Server sync failed:', err);
                    showToast('Saved locally. Custom domain will sync when server is ready.');
                });
            } else {
                showToast('Saved!');
            }
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        function upgradeToPro() {
            // Show modal like Quote Genius
            document.getElementById('proModal').style.display = 'flex';
        }

        function closeProModal() {
            document.getElementById('proModal').style.display = 'none';
        }

        function unlockPro() {
            const code = document.getElementById('unlockCode').value.trim().toUpperCase();
            
            if (!code) {
                showToast('Please enter a code');
                return;
            }
            
            // Validate with server
            fetch('https://quote-genius-server.onrender.com/validate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ code: code, product: 'linkpage' })
            })
            .then(res => res.json())
            .then(data => {
                if (data.valid) {
                    isPro = true;
                    localStorage.setItem('linkpage_pro', 'true');
                    localStorage.setItem('linkpage_code', code);
                    showProFeatures();
                    savePage();
                    closeProModal();
                    showToast('Pro activated! üéâ');
                } else {
                    showToast('Invalid code');
                }
            })
            .catch(err => {
                // Fallback to demo codes if server is down
                const validCodes = ['DEMO-PRO', 'TEST-1234', 'NEX-PRO'];
                if (validCodes.includes(code)) {
                    isPro = true;
                    localStorage.setItem('linkpage_pro', 'true');
                    localStorage.setItem('linkpage_code', code);
                    showProFeatures();
                    savePage();
                    closeProModal();
                    showToast('Pro activated! üéâ');
                } else {
                    showToast('Invalid code');
                }
            });
        }

        function redeemCode() {
            const code = document.getElementById('pro-code').value.trim().toUpperCase();
            
            if (!code) {
                showToast('Please enter a code');
                return;
            }
            
            // Validate with server
            fetch('https://quote-genius-server.onrender.com/validate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ code: code, product: 'linkpage' })
            })
            .then(res => res.json())
            .then(data => {
                if (data.valid) {
                    isPro = true;
                    localStorage.setItem('linkpage_pro', 'true');
                    localStorage.setItem('linkpage_code', code);
                    showProFeatures();
                    savePage();
                    showToast('Pro activated! üéâ');
                } else {
                    showToast('Invalid code');
                }
            })
            .catch(err => {
                // Fallback to demo codes if server is down
                const validCodes = ['DEMO-PRO', 'TEST-1234', 'NEX-PRO'];
                if (validCodes.includes(code)) {
                    isPro = true;
                    localStorage.setItem('linkpage_pro', 'true');
                    localStorage.setItem('linkpage_code', code);
                    showProFeatures();
                    savePage();
                    showToast('Pro activated! üéâ');
                } else {
                    showToast('Invalid code');
                }
            });
        }

        function showProFeatures() {
            document.getElementById('pro-status').style.display = 'block';
            document.getElementById('pro-prompt').style.display = 'none';
            document.getElementById('bg-image-section').style.display = 'block';
            document.getElementById('analytics-section').style.display = 'block';
            document.getElementById('domain-section').style.display = 'block';
            
            // Show pro-only sections
            document.querySelectorAll('.pro-only').forEach(el => el.classList.add('show'));
        }

        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                switchTab(tab.dataset.tab);
            });
        });

        // Load saved data
        const saved = localStorage.getItem('linkpage_data');
        
        // Default data for Trent's page
        const defaultData = {
            name: 'Trent',
            bio: 'Solo dev building things. üìç NWA',
            avatar: '',
            bgImage: '',
            customDomain: '',
            theme: '#0a0a0a',
            links: [
                { title: 'üîß Curtis Tech', url: 'https://tcby04.github.io/curtis-tech/' },
                { title: '‚ö° Quote Genius', url: 'https://tcby04.github.io/quote-genius/' },
                { title: 'üçï FoodTruckIQ', url: 'https://tcby04.github.io/foodtruckiq/' },
                { title: 'üîó LinkPage', url: 'https://tcby04.github.io/linkpage/' },
                { title: 'üóúÔ∏è PixelSqueeze', url: 'https://tcby04.github.io/pixel-squeeze/' }
            ],
            isPro: true
        };
        
        let data = defaultData;
        
        if (saved) {
            data = { ...defaultData, ...JSON.parse(saved) };
        } else {
            // Save default data for first visit
            localStorage.setItem('linkpage_data', JSON.stringify(defaultData));
            localStorage.setItem('linkpage_pro', 'true');
        }
        
        document.getElementById('name').value = data.name || '';
        document.getElementById('bio').value = data.bio || '';
        document.getElementById('avatar').value = data.avatar || '';
        document.getElementById('bg-image').value = data.bgImage || '';
        document.getElementById('custom-domain').value = data.customDomain || '';
        links = data.links || [];
        isPro = data.isPro || localStorage.getItem('linkpage_pro') === 'true';
        
        if (data.theme) {
            currentTheme = data.theme;
            document.documentElement.style.setProperty('--bg', data.theme);
        }
        
        updateBgPreview();

        // Check for pro=success in URL (after Stripe payment)
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('pro') === 'success') {
            // Clean URL
            window.history.replaceState({}, document.title, window.location.pathname);
            // Show modal
            setTimeout(() => {
                showToast('Payment successful! Enter your code to unlock Pro.');
                upgradeToPro();
            }, 500);
        }

        // Load analytics
        const savedAnalytics = localStorage.getItem('linkpage_analytics');
        if (savedAnalytics) {
            analytics = JSON.parse(savedAnalytics);
        }

        // Show pro features if active
        if (isPro) {
            showProFeatures();
            updateAnalyticsDisplay();
        }

        renderLinks();
    </script>
</body>
</html>
